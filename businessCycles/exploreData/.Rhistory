join_key = index[!(index %in% c("run","recessionMagnitude"))]
fDiff = full_join(fSS, fBase, by = join_key)
varsX = sapply(vars, function(x) paste0(x, ".x"))
varsY = sapply(vars, function(x) paste0(x, ".y"))
varsD = sapply(vars, function(x) paste0(x, ".d"))
fDiff[varsD] = fDiff[varsX]-fDiff[varsY]
fDiff = fDiff %>% rename(recessionMagnitude = recessionMagnitude.x)
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1) %>%
select(join_key, "run.x", "recessionMagnitude", "run.y", starts_with("Profit"))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1) %>%
plot_ly( x = ~tick) %>%
add_lines( y = ~AcumProfit)
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1) %>%
select(join_key, "run.x", "recessionMagnitude", "run.y", starts_with("Profit"))
index
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1) %>%
select("tick", "run.x", "recessionMagnitude", "run.y", "FirmNumID", starts_with("Profit"))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1) %>%
select("tick", "run.x", "run.y", "FirmNumID", starts_with("Profit"))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1,
FirmNumID == 15,
tick > 20) %>%
select("tick", "run.x", "run.y", "FirmNumID", starts_with("Profit"))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1,
FirmNumID == 15,
tick > 1) %>%
select("tick", "run.x", "run.y", "FirmNumID", starts_with("Profit"))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1,
#        FirmNumID == 15,
tick > 20) %>%
select("tick", "run.x", "run.y", "FirmNumID", starts_with("Profit"))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1,
FirmNumID == 141,
tick > 20) %>%
select("tick", "run.x", "run.y", "FirmNumID", starts_with("Profit"))
f %>% filter(recessionMagnitude > 0) %>% select("run","tick","FirmNumID")
fsc %>% filter(recessionMagnitude > 0) %>% select("run","tick","FirmNumID")
tmp = fsc %>% filter(recessionMagnitude > 0) %>% select("run","tick","FirmNumID")
tmp = fsc %>% filter(recessionMagnitude > 0, recessionStart == 25) %>% select("run","tick","FirmNumID")
tmp24 = tmp %>% filter(tick == 24)
tmp27 = tmp %>% filter(tick == 27)
join(tmp24, tmp27, by=c("run","FirmNumID"))
inner_join(tmp24, tmp27, by=c("run","FirmNumID"))
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "firmID")
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "firmNumID")
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID")
unique(inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID"))
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID")
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% group_by("run") %count()
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% group_by("run") %>% count()
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% group_by("run")
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% group_by("run") %>% count("FirmNumID")
t = full_join(fSS, fBase, by = join_key) %>% mutate(varsD = varsX - varsY)
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID")
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% group_by("run")
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% group_by(run)
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% distinct(run)
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% distinct(run) %>% count()
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% count(run)
inner_join(fsc[fsc$tick == 24], fsc[fsc$tick == 27], by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% count(run)
inner_join(filter(fsc, tick == 24), filter(fsc, tick == 27), by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% count(run)
inner_join(filter(fsc, tick == 24 & recessionMagnitude > 0), filter(fsc, tick == 27), by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% count(run)
inner_join(filter(fsc, tick == 24 & recessionMagnitude > 0), filter(fsc, tick == 27, recessionMagnitude > 0), by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% count(run)
filter(fsc, tick == 24 & recessionMagnitude > 0)
filter(fsc, recessionMagnitude > 0)
filter(fsc, tick == 24 & recessionMagnitude > 0 & recessionStart == 25)
inner_join(filter(fsc, tick == 24 & recessionMagnitude > 0 & recessionStart == 25), filter(fsc, tick == 27, recessionMagnitude > 0 & recessionStart == 25), by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% count(run)
inner_join(filter(fsc, tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(fsc, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit")
inner_join(filter(fsc, tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(fsc, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(filter(.Data, tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(.Data, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(filter(., tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(., tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(filter(.data, tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(.data, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(filter(.data, tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(.data, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(filter(., tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(,, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(filter(fsc, tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(fsc, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
filter(fsc, tick == 24 & recessionMagnitude > 0 & recessionStart == 25)
fsc %>% filter(., tick == 24 & recessionMagnitude > 0 & recessionStart == 25)
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(fsc, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(. %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
. %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join((. %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25)),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(. %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
. %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) }%>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) }%>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%{
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) } %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>% {
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) } %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(. %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) } %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join({. %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25)},
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) } %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
source('C:/Users/javie/git/businessCycles/businessCycles/exploreData/working.R')
library(tidyverse)
library(plotly)
#readFiles
path = "C:/Users/javie/git/businessCycles/businessCycles/output"
setwd(path)
fileID = "2019.abr..25.18_14_16"
f <- read_csv(paste0("Firms.", fileID, ".csv"))
p <- read_csv(paste0("Firms.", fileID, ".batch_param_map.csv"))
# Params not unique
tmp = p %>% select(-"run", -"randomSeed") %>% unique()
relevantParams = names(tmp)[tmp %>% summarise_all(funs(n_distinct(.))) > 1]
rm(tmp)
#Firms with Scenarios (relevant parameters values)
fsc = inner_join(f, select(p, "run", relevantParams), by="run")
# Distinguish between index columns and value columns
index = c("run",'tick',"FirmNumID", relevantParams, "random_seed")
vars = names(fsc)[!(names(fsc) %in% index)]
# Calculate differences from base scenario (Base scneario: the one with 0 recession magnitude)
fBase = filter(fsc, recessionMagnitude == 0)
fSS = filter(fsc, recessionMagnitude != 0)
join_key = index[!(index %in% c("run","recessionMagnitude"))]
fDiff = full_join(fSS, fBase, by = join_key)
varsX = sapply(vars, function(x) paste0(x, ".x"))
varsY = sapply(vars, function(x) paste0(x, ".y"))
varsD = sapply(vars, function(x) paste0(x, ".d"))
fDiff[varsD] = fDiff[varsX]-fDiff[varsY]
fDiff = fDiff %>% rename(recessionMagnitude = recessionMagnitude.x)
index
join_key
groupKey = index[!(index %in% c("run","random_seed"))]
groupKey
relevantParams
index
groupKey = c(relevantParams, "run", "tick", "FirmNumID")
fDiff %>%
group_by(groupKey) %>%
summarise(
n = n(),
OLF = quantile(OperatingLeverage.x, probs = seq( 0, 1, 0.33), names = TRUE)
)
fDiff %>%
group_by(relevantParams, "run", "tick", "FirmNumID") %>%
summarise(
n = n(),
OLF = quantile(OperatingLeverage.x, probs = seq( 0, 1, 0.33), names = TRUE)
)
groupKey = list(relevantParams, "run", "tick", "FirmNumID")
groupKey
fDiff %>%
group_by(groupKey) %>%
summarise(
n = n(),
OLF = quantile(OperatingLeverage.x, probs = seq( 0, 1, 0.33), names = TRUE)
)
group_by(as.formula(groupKey) %>%
fDiff %>%
group_by(as.formula(groupKey)) %>%
summarise(
n = n(),
OLF = quantile(OperatingLeverage.x, probs = seq( 0, 1, 0.33), names = TRUE)
)
fDiff %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = quantile(OperatingLeverage.x, probs = seq( 0, 1, 0.33), names = TRUE)
)
groupKey = c(relevantParams, "run", "tick", "FirmNumID")
fDiff %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = quantile(OperatingLeverage.x, probs = seq( 0, 1, 0.33), names = TRUE)
)
f %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = quantile(OperatingLeverage.x, probs = seq( 0, 1, 0.33), names = TRUE)
)
fsc %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = quantile(OperatingLeverage.x, probs = seq( 0, 1, 0.33), names = TRUE)
)
fsc %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = quantile(OperatingLeverage, probs = seq( 0, 1, 0.33), names = TRUE)
)
quantile(f$OperatingLeverage, probs = seq( 0, 1, 1/3)
)
OLF_Names = c(LOL, MOL, HOL)
OLF_Names = c("LOL", "MOL", "HOL")
rm(OLF_Names)
OL_levels = c("LOL", "MOL", "HOL")
gtools
package_version(gtools)
library(gtools)
fsc %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = cut(OperatingLeverage,
breaks = quantile(OperatingLeverage, probs = seq( 0, 1, 1/3), names = TRUE),
labels = OL_levels))
fscC = tibble(fsc)
View(fscC)
rm(fscC)
fscC = data.frame(fsc)
fscC[OLF] = cut(fscC[OperatingLeverage],
breaks = quantile(fscC[OperatingLeverage], probs = seq( 0, 1, 1/3), names = TRUE),
labels = OL_levels))
fscC[OLF] = cut(fscC[OperatingLeverage],
breaks = quantile(fscC[OperatingLeverage], probs = seq( 0, 1, 1/3), names = TRUE),
labels = OL_levels)
fscC[OLF] = cut(fscC["OperatingLeverage"],
breaks = quantile(fscC["OperatingLeverage"], probs = seq( 0, 1, 1/3), names = TRUE),
labels = OL_levels)
fscC[OLF] = cut(fscC["OperatingLeverage"],
breaks = quantile(fscC["OperatingLeverage"], probs = seq( 0, 1, 1/3)),
labels = OL_levels)
quantile(fscC["OperatingLeverage"], probs = seq( 0, 1, 1/3))
quantile(fscC["OperatingLeverage"], probs = seq( 0, 1, 1/3), na.rm = TRUE)
fscC[OLF] = cut(fscC["OperatingLeverage"],
breaks = quantile(fscC["OperatingLeverage"], probs = seq( 0, 1, 1/3), na.rm = TRUE),
labels = OL_levels)
fscC[OLF] = cut(fscC["OperatingLeverage"],
breaks = quantile(fscC["OperatingLeverage"], probs = seq( 0, 1, 1/3), na.rm = TRUE),
labels = OL_levels)
fscC[OLF] = cut(fscC["OperatingLeverage"],
breaks = c(0.2, 0.4, 0.5),
labels = OL_levels)
fscC[OLF] = fsc %>% select(OperatingLeverage) %>% filter(!is.na()) %>% cut(fscC["OperatingLeverage"],
breaks = c(0.2, 0.4, 0.5),
labels = OL_levels)
fscC[OLF] = fsc %>% select(OperatingLeverage) %>% filter(!is.na()) %>%
cut(breaks = c(0.2, 0.4, 0.5),
labels = OL_levels)
fscC[OLF] = fsc %>% select(OperatingLeverage) %>% filter(!is.na(.)) %>%
cut(breaks = c(0.2, 0.4, 0.5),
labels = OL_levels)
fsc %>% select(OperatingLeverage) %>% filter(!is.na(.)))
fsc %>% select(OperatingLeverage) %>% filter(!is.na(.))
fsc %>% select(OperatingLeverage) %>% filter(!is.na(.)) %>% cut(breaks = c(0.2, 0.3), labels = FALSE)
fsc %>% select(OperatingLeverage) %>% filter(!is.na(.)) %>% cut(as.vector(.), breaks = c(0.2, 0.3), labels = FALSE)
fsc %>% select(OperatingLeverage) %>% filter(!is.na(.)) %>% {cut(as.vector(.), breaks = c(0.2, 0.3), labels = FALSE)}
fsc %>% select(OperatingLeverage) %>% filter(!is.na(.)) %>% {cut(as.matrix(.), breaks = c(0.2, 0.3), labels = FALSE)}
fsc %>% select(OperatingLeverage) %>% filter(!is.na(.)) %>% {cut(as.matrix(.), breaks = c(0.2, 0.3), labels = c("o1", "o2", "o3"))}
fsc %>% select(OperatingLeverage) %>% filter(!is.na(.)) %>% {cut(as.matrix(.), breaks = c(0.2, 0.3), labels = c("o1", "o2"))}
fsc %>% select(OperatingLeverage) %>% filter(!is.na(.)) %>% {cut(as.matrix(.), breaks = c(0.2, 0.3), labels = c("o1", "o2"))}
length(c(0.2, 0.3))
length(c("ol", "ol2"))
fsc %>% select(OperatingLeverage) %>% filter(!is.na(.)) %>% {cut(as.matrix(.), breaks = c(0.2, 0.3), labels = c("o1", "o2"))}
fsc %>% select(OperatingLeverage) %>% filter(!is.na(.)) %>% {cut(as.matrix(.), breaks = c(0.2, 0.3))}
fsc %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = cut(as.matrix(OperatingLeverage),
breaks = quantile(as.matrix(OperatingLeverage), probs = seq( 0, 1, 1/3), names = TRUE),
labels = OL_levels))
fsc %>%
group_by_at(vars(one_of(groupKey)))
)
fsc %>% group_by_at(vars(one_of(groupKey)))
fsc %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = list(quantile(as.matrix(OperatingLeverage), probs = seq( 0, 1, 1/3), names = TRUE)))
head(fsc) %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = list(quantile(as.matrix(OperatingLeverage), probs = seq( 0, 1, 1/3), names = TRUE)))
head(fsc) %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = list(quantile(as.matrix(OperatingLeverage), probs = seq( 0, 1, 1/3), names = TRUE))) %>% select(OLF)
head(fsc) %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = list(quantile(as.matrix(OperatingLeverage), probs = seq( 0, 1, 1/3), names = TRUE))) %>% unest()
head(fsc) %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = list(quantile(as.matrix(OperatingLeverage), probs = seq( 0, 1, 1/3), names = TRUE))) %>% unnest()
head(fsc) %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = list(quantile(as.matrix(OperatingLeverage), probs = seq( 0, 1, 1/3), names = TRUE))) %>% select(OLF) %>% unnest()
head(fsc) %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = list(quantile(as.matrix(OperatingLeverage), probs = seq( 0, 1, 1/3), names = TRUE))) %>% select(OLF) %>% unnest()
head(fsc) %>%
group_by_at(vars(one_of(groupKey)))
head(fsc) %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = list(quantile(as.matrix(OperatingLeverage), probs = seq( 0, 1, 1/3), names = TRUE))) %>% select(groupKey, OLF) %>% unnest()
head(fsc) %>%
summarise(
OLF = cut(as.matrix(OperatingLeverage), breaks = (0, 0.3, 0.8, 1)),
OLFQ = list(quantile(as.matrix(OperatingLeverage), probs = seq( 0, 1, 1/3), names = TRUE)))
head(fsc) %>%
summarise(
OLF = cut(as.matrix(OperatingLeverage), breaks = (0, 0.3, 0.8, 1)),
OLFQ = list(quantile(as.matrix(OperatingLeverage), probs = seq( 0, 1, 1/3))))
head(fsc) %>%
summarise(
OLF = cut(as.matrix(OperatingLeverage), breaks = c(0, 0.3, 0.8, 1)),
OLFQ = list(quantile(as.matrix(OperatingLeverage), probs = seq( 0, 1, 1/3))))
head(fsc) %>% cut(.$OperatingLeverage, breaks = c(0, 0.5, 1))
head(fsc) %>% cut(as.matrix(.$OperatingLeverage), breaks = c(0, 0.5, 1))
cut(as.matrix(head(fsc$OperatingLeverage), breaks = c(0, 0.5, 1))
)
cut(as.matrix(head(fsc$OperatingLeverage)), breaks = c(0, 0.5, 1))
head(fsc$OperatingLeverage)
fsc %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = ntile(OperatingLeverage, 3))
fscQ = fsc %>%
group_by_at(vars(one_of(groupKey))) %>%
summarise(
n = n(),
OLF = ntile(OperatingLeverage, 3))
View(fscQ)
summary(fscQ$OLF)
fscQ = fsc %>%
group_by_at(vars(one_of(groupKey))) %>%
mutate(
n = n(),
OLF = ntile(OperatingLeverage, 3))
summary(fscQ$OLF)
fscQ = fsc %>%
group_by_at(vars(one_of(groupKey)), OLF = ntile(OperatingLeverage, 3))
fscQ = fsc %>%
group_by_at(vars(one_of(groupKey)), OLF = ntile("OperatingLeverage", 3))
fscQ = fsc %>%
group_by(run, tick, FirmNumID,
recessionDuration, recessionMagnitude, recessionStart,
OLF = ntile("OperatingLeverage", 3))
fscQ = fsc %>%
group_by(run, tick, FirmNumID,
recessionDuration, recessionMagnitude, recessionStart,
OLF = ntile(OperatingLeverage, 3))
View(fscQ)
fscQ %>% select(OLF, OperatingLeverage)
fscQ = fsc %>%
group_by(c(groupKey, OLF = ntile(OperatingLeverage, 3)))
fscQ = fsc %>%
group_by_at(vars(one_of(c(groupKey, OLF = ntile(OperatingLeverage, 3)))))
fscQ = fsc %>%
group_by(groupKey, OLF = ntile(OperatingLeverage, 3))
fscQ2 = fsc %>%
group_by(groupKey) %>%
mutate(OLF = ntile(OperatingLeverage, 3))
fscQ2 = fsc %>%
group_by_at(.vars = groupKey) %>%
mutate(OLF = ntile(OperatingLeverage, 3))
View(fscQ2)
fscG = fsc %>%
group_by(run, tick, FirmNumID,
recessionDuration, recessionMagnitude, recessionStart)
head(fscG)
fscG %>% n()
fscG %>% count()
fscG %>% count(OperatingLeverage)
fscG %>% summarise(n())
fscG %>% summarise(random_seed, n())
groupKey = c(relevantParams, "run", "tick")
fscQ = fsc %>%
group_by(run, tick,
recessionDuration, recessionMagnitude, recessionStart,
OLF = ntile(OperatingLeverage, 3))
fscG = fsc %>%
group_by(run, tick,
recessionDuration, recessionMagnitude, recessionStart)
View(fscG)
fscQ2 = fscG %>% mutate(OLF = ntile(OperatingLeverage, 3))
View(fscQ)
View(fscQ2)
fscG2 = fsc %>%
group_by_at(.vars = one_of(groupKey))
fscG2 = fsc %>%
group_by_at(.vars = vars(one_of(groupKey)))
View(fscG2)
View(fscG)
fscG.vars
fscG(vars)
fscG$vars
fscG{vars}
attributes(fscG)
attributes(fscG)["vars"]
attributes(fscG2)["vars"]
attributes(fscG2).names
names(attributes(fscG2))
attributes(fscG2)["biggest_group_size"]
attributes(fscG)["biggest_group_size"]
fsc %>%
group_by(vars(one_of(groupKey)))
