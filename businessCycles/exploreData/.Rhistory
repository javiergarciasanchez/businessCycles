p <- read_csv(paste0("Firms.", fileID, ".batch_param_map.csv"))
}
# Process data
createScenariosTable <- function(param){
#library(dplyr)  included in tidyverse
sc = p %>% select(-"run", -"randomSeed") %>% unique()
relevantParams = names(sc)[sc %>% summarise_all(funs(n_distinct(.))) > 1]
sc = select(sc, relevantParams)
sc
}
createScenariosTable(p)
createScenariosTable <- function(param){
#library(dplyr)  included in tidyverse
sc = p %>% select(-"run", -"randomSeed") %>% unique()
relevantParams = names(sc)[sc %>% summarise_all(funs(n_distinct(.))) > 1]
sc = select(sc, relevantParams)
}
createScenariosTable(p)
sc = createScenariosTable(p)
View(sc)
p.run
p[run]
p$run
max(p$run)
View(f)
head(f)
source('C:/Users/javie/git/businessCycles/businessCycles/exploreData/read_Process.R')
readfiles("2019.abr..25.14_42_46")
source('C:/Users/javie/git/businessCycles/businessCycles/exploreData/read_Process.R')
list(f, p) = readfiles(2019.abr..25.14_42_46)
list(f, p) = readfiles("2019.abr..25.14_42_46")
source('C:/Users/javie/git/businessCycles/businessCycles/exploreData/read_Process.R')
files = readfiles("2019.abr..25.14_42_46")
f = files[1]
source('~/.active-rstudio-document')
rm(files)
source('~/.active-rstudio-document')
rm(readfiles)
#library(readr) included in tidyverse
setwd(path)
sc = createScenariosTable(p)
View(sc)
library(readr)
p <- read_csv("Firms.2019.abr..25.15_32_46.batch_param_map.csv")
View(p)
library(readr)
f <- read_csv("Firms.2019.abr..25.15_32_46.csv")
View(f)
f %>% gather("run","tick","firmNumID")
f %>% gather("run","tick","FirmNumID")
t = f %>% gather("run","tick","FirmNumID")
View(t)
View(f)
rm(t)
source('C:/Users/javie/git/businessCycles/businessCycles/exploreData/process.R')
sc = createScenariosTable(p)
inner_join(f, sc, by="run")
fsc = inner_join(f, sc, by="run")
# Params not unique
tmp = p %>% select(-"run", -"randomSeed") %>% unique()
View(tmp)
relevantParams = names(tmp)[tmp %>% summarise_all(funs(n_distinct(.))) > 1]
sc = select(p, "run", relevantParams)
View(sc)
relevantParams
smallP = select(p, "run", relevantParams)
path = "C:/Users/javie/git/businessCycles/businessCycles/output"
#library(readr) included in tidyverse
setwd(path)
# Params not unique
tmp = p %>% select(-"run", -"randomSeed") %>% unique()
relevantParams = names(tmp)[tmp %>% summarise_all(funs(n_distinct(.))) > 1]
smallP = select(p, "run", relevantParams)
fsc = inner_join(f, smallP, by="run")
rm(tmp)
rm(sc)
rm(fsc, smallP)
# Params not unique
tmp = p %>% select(-"run", -"randomSeed") %>% unique()
relevantParams = names(tmp)[tmp %>% summarise_all(funs(n_distinct(.))) > 1]
rm(tmp)
fsc = inner_join(f, select(p, "run", relevantParams), by="run")
index = c("run",'tick',"FirmNumID", relevantParams)
index
index = c("run",'tick',"FirmNumID", relevantParams, "randomSeed")
names(f) %in% index
names(f)[names(f) %in% index]
names(fsc)[names(fsc) %in% index]
names(fsc)[!(names(fsc) %in% index)]
var = names(fsc)[!(names(fsc) %in% index)]
index
index = c("run",'tick',"FirmNumID", relevantParams, "random_seed")
var = names(fsc)[!(names(fsc) %in% index)]
names(fsc)[!(names(fsc) %in% index)]
names(f)[names(f) %in% index]
names(fsc)[names(fsc) %in% index]
# Calculate differences from base scenario (Base scneario: the one with 0 recession magnitude)
fBase = filter(fsc, recessionMagnitude == 0)
View(fBase)
unique(fsc$recessionMagnitude)
fSS = filter(fsc, recessionMagnitue != 0)
fSS = filter(fsc, recessionMagnitude != 0)
filter(relevantParams, -"run")
index[!(index %in% c("run")]
index %in% "run"
index[!(index %in% c("run"))]
index[!(index %in% c("run","recessionMagnitude"))]
join_key = index[!(index %in% c("run","recessionMagnitude"))]
inner_join(fBase,fss, by = join_key)
inner_join(fBase,fSS, by = join_key)
j = inner_join(fBase,fSS, by = join_key)
join_key
j = left_join(fSS, fBase, by = join_key)
View(j)
j = outer_join(fSS, fBase, by = join_key)
j = full_join(fSS, fBase, by = join_key)
View(j)
j["AcumProfit"] = j["AcumpProfit.x"]-j["AcumProfit.y"]
j["AcumProfit"] = j["AcumProfit.x"]-j["AcumProfit.y"]
View(j)
unique(j$AcumProfit)
vars = names(fsc)[!(names(fsc) %in% index)]
rm(var)
sapply(vars, function(x) paste0(x, ".X"))
varsX = sapply(vars, function(x) paste0(x, ".x"))
varsY = sapply(vars, function(x) paste0(x, ".y"))
j[vars] = j[varsX]-j[varsY]
View(j)
View(j)
edit(j)
j[run==500]
j[j$run.x==500]
j$run.x == 500
select(j, run==500)
select(j, run.x==500)
select(j, "run.x"==500)
filter(j, run.x==500)
j$run.x
unique(j$run.x)
filter(j, run.x==434)
filter(j, run.x==434, tick == 10)
filter(j, run.x==434, tick == 10) %>% select(FimrNumID)
filter(j, run.x==434, tick == 10) %>% select(FirmNumID)
filter(j, run.x==434, tick == 10, FirmNumID == 84)
filter(j, run.x==434, tick == 10, FirmNumID == 84) %>% select(starts_with("AcumProfit"))
filter(j, run.x==434, tick == 10, FirmNumID == 84) %>% select(starts_with("recession"),starts_with("AcumProfit"))
filter(j, run.x==434, tick == 37, FirmNumID == 84) %>% select(starts_with("AcumProfit"))
filter(j, run.x==434, tick == 10, FirmNumID == 84) %>% select(starts_with("AcumProfit"))
filter(j, run.x==434, tick == 30, FirmNumID == 84) %>% select(starts_with("AcumProfit"))
filter(j, run.x==434, tick == 11, FirmNumID == 84) %>% select(starts_with("AcumProfit"))
filter(j, run.x==434, tick == 12, FirmNumID == 84) %>% select(starts_with("AcumProfit"))
filter(j, run.x==434, tick == 13, FirmNumID == 84) %>% select(starts_with("AcumProfit"))
filter(j, run.x==434, tick == 20, FirmNumID == 84) %>% select(starts_with("AcumProfit"))
filter(j, run.x==434, FirmNumID == 84) %>% select(starts_with("AcumProfit"), tick)
filter(j, run.x==434, tick == 50) %>% select(starts_with("AcumProfit"), "FirmNumID")
filter(j, run.x==434, tick == 50, !is.na(AcumProfit.y) ) %>% select(starts_with("AcumProfit"), "FirmNumID")
filter(j, run.x==434, tick > 30) %>% select(starts_with("AcumProfit"), "FirmNumID", "tick")
filter(j, run.x==434, tick > 35) %>% select(starts_with("AcumProfit"), "FirmNumID", "tick")
filter(j, run.x==434, tick > 30, !is.na(AcumProfit.y) ) %>% select(starts_with("AcumProfit"), "FirmNumID")
filter(j, run.x==434, tick > 30, !is.na(AcumProfit.y) ) %>% select(starts_with("AcumProfit"), "FirmNumID", "tick")
filter(j, run.x==434, tick > 34, !is.na(AcumProfit.y) ) %>% select(starts_with("AcumProfit"), "FirmNumID", "tick")
filter(j, run.x==434, tick > 33, !is.na(AcumProfit.y) ) %>% select(starts_with("AcumProfit"), "FirmNumID", "tick")
fDiff = j %>% select(index, vars)
fDiff = j %>% select(index, vars)
fDiff = j %>% select(join_key, vars, "run.x")
fDiff = j %>% select(join_key, vars, "run.x", "run.y") %>% rename(runSS = run.x)
fDiff = j %>% select(join_key, vars, "run.x", "run.y") %>% rename(runSS = run.x, runBase = run.y)
package_version(plotly)
library(plotly)
package_version(plotly)
package_version("plotly")
package_version('plotly')
install.packages("plotly")
packageVersion('plotly')
varToDraw = c("AcumProfit")
fDiff %>%
plot_ly( x = ~tick) %>%
add_lines( y = as.formula(paste0("~",varToDraw)), color = df$FirmNumID)
fDiff %>%
plot_ly( x = ~tick) %>%
add_lines( y = as.formula(paste0("~",varToDraw)), color = ~FirmNumID)
)
fDiff %>%
plot_ly( x = ~tick) %>%
add_lines( y = as.formula(paste0("~",varToDraw)))
rm(j)
tmp = full_join(fSS, fBase, by = join_key)
varsX = sapply(vars, function(x) paste0(x, ".x"))
varsY = sapply(vars, function(x) paste0(x, ".y"))
tmp[vars] = tmp[varsX]-j[varsY]
fDiff = tmp %>%
select(join_key, vars, "run.x", "recessionMagnitude.x", "run.y") %>%
rename(runSS = run.x, recessionMagnitude = recessionMagnitude.x, runBase = run.y)
tmp[vars] = tmp[varsX]-tmp[varsY]
fDiff = tmp %>%
select(join_key, vars, "run.x", "recessionMagnitude.x", "run.y") %>%
rename(runSS = run.x, recessionMagnitude = recessionMagnitude.x, runBase = run.y)
unique(fDiff$recessionMagnitude)
unique(fDiff$recessionStart)
unique(fDiff$recessionDuration)
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 2
) %>%
plot_ly( x = ~tick) %>%
add_lines( y = as.formula(paste0("~",varToDraw)))
rm(varToDraw)
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 2
) %>%
plot_ly( x = ~tick) %>%
add_lines( y = ~AcumProfit)
fDiff["FirmID"] = "F"+fDiff[FirmNumID]
fDiff["FirmID"] = "F"+fDiff["FirmNumID"]
str_c("F",fDiff["FirmNumID"])
sapply(fDiff["FirmNumID"], function(x) paste0("F:", x))
fDiff["FirmID"] = sapply(fDiff["FirmNumID"], function(x) paste0("F:", x))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 2
) %>%
plot_ly( x = ~tick) %>%
add_lines( y = ~AcumProfit,
color = ~FirmID)
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1
) %>%
plot_ly( x = ~tick) %>%
add_lines( y = ~AcumProfit)
fFilter = c(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1)
fFilter = c(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1)
fFilter = "recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1"
fDiff %>%
filter(as.formula(fFilter)) %>%
plot_ly( x = ~tick) %>%
add_lines( y = ~AcumProfit)
rm(fFilter)
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1) %>%
select(join_key, Ã„cumProfit)
select(join_key, AcumProfit)
select(join_key, AcumProfit)
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1) %>%
select(join_key, "AcumProfit")
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1) %>%
select("runSS", "tick", "firmNumID", "AcumProfit")
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1) %>%
select("runSS", "tick", "FirmNumID", "AcumProfit")
tmp %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1) %>%
select("run.x", "tick", "FirmNumID", "AcumProfit", "AcumProfit.x", "AcumProfit.y")
tmp %>%
filter(recessionMagnitude.x==0.3,
recessionStart == 25,
recessionDuration == 1) %>%
select("run.x", "tick", "FirmNumID", "AcumProfit", "AcumProfit.x", "AcumProfit.y")
vars
rm(tmp)
varsD = sapply(vars, function(x) paste0(x, ".d"))
fDiff[varsD] = fDiff[varsX]-fDiff[varsY]
fDiff = fDiff %>% rename(recessionMagnitude = recessionMagnitude.x)
fDiff = full_join(fSS, fBase, by = join_key)
varsX = sapply(vars, function(x) paste0(x, ".x"))
varsY = sapply(vars, function(x) paste0(x, ".y"))
varsD = sapply(vars, function(x) paste0(x, ".d"))
fDiff[varsD] = fDiff[varsX]-fDiff[varsY]
fDiff = fDiff %>% rename(recessionMagnitude = recessionMagnitude.x)
#readFiles
path = "C:/Users/javie/git/businessCycles/businessCycles/output"
setwd(path)
library(readr)
p <- read_csv("Firms.2019.abr..25.18_14_16.batch_param_map.csv")
View(p)
library(readr)
f <- read_csv("Firms.2019.abr..25.18_14_16.csv")
View(f)
# Params not unique
tmp = p %>% select(-"run", -"randomSeed") %>% unique()
relevantParams = names(tmp)[tmp %>% summarise_all(funs(n_distinct(.))) > 1]
rm(tmp)
#Firms with Scenarios (relevant parameters values)
fsc = inner_join(f, select(p, "run", relevantParams), by="run")
# Distinguish between index columns and value columns
index = c("run",'tick',"FirmNumID", relevantParams, "random_seed")
vars = names(fsc)[!(names(fsc) %in% index)]
# Calculate differences from base scenario (Base scneario: the one with 0 recession magnitude)
fBase = filter(fsc, recessionMagnitude == 0)
fSS = filter(fsc, recessionMagnitude != 0)
join_key = index[!(index %in% c("run","recessionMagnitude"))]
fDiff = full_join(fSS, fBase, by = join_key)
varsX = sapply(vars, function(x) paste0(x, ".x"))
varsY = sapply(vars, function(x) paste0(x, ".y"))
varsD = sapply(vars, function(x) paste0(x, ".d"))
fDiff[varsD] = fDiff[varsX]-fDiff[varsY]
fDiff = fDiff %>% rename(recessionMagnitude = recessionMagnitude.x)
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1) %>%
select(join_key, "run.x", "recessionMagnitude", "run.y", starts_with("Profit"))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1) %>%
plot_ly( x = ~tick) %>%
add_lines( y = ~AcumProfit)
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1) %>%
select(join_key, "run.x", "recessionMagnitude", "run.y", starts_with("Profit"))
index
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1) %>%
select("tick", "run.x", "recessionMagnitude", "run.y", "FirmNumID", starts_with("Profit"))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1) %>%
select("tick", "run.x", "run.y", "FirmNumID", starts_with("Profit"))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1,
FirmNumID == 15,
tick > 20) %>%
select("tick", "run.x", "run.y", "FirmNumID", starts_with("Profit"))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1,
FirmNumID == 15,
tick > 1) %>%
select("tick", "run.x", "run.y", "FirmNumID", starts_with("Profit"))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1,
#        FirmNumID == 15,
tick > 20) %>%
select("tick", "run.x", "run.y", "FirmNumID", starts_with("Profit"))
fDiff %>%
filter(recessionMagnitude==0.3,
recessionStart == 25,
recessionDuration == 1,
random_seed == 1,
FirmNumID == 141,
tick > 20) %>%
select("tick", "run.x", "run.y", "FirmNumID", starts_with("Profit"))
f %>% filter(recessionMagnitude > 0) %>% select("run","tick","FirmNumID")
fsc %>% filter(recessionMagnitude > 0) %>% select("run","tick","FirmNumID")
tmp = fsc %>% filter(recessionMagnitude > 0) %>% select("run","tick","FirmNumID")
tmp = fsc %>% filter(recessionMagnitude > 0, recessionStart == 25) %>% select("run","tick","FirmNumID")
tmp24 = tmp %>% filter(tick == 24)
tmp27 = tmp %>% filter(tick == 27)
join(tmp24, tmp27, by=c("run","FirmNumID"))
inner_join(tmp24, tmp27, by=c("run","FirmNumID"))
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "firmID")
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "firmNumID")
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID")
unique(inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID"))
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID")
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% group_by("run") %count()
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% group_by("run") %>% count()
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% group_by("run")
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% group_by("run") %>% count("FirmNumID")
t = full_join(fSS, fBase, by = join_key) %>% mutate(varsD = varsX - varsY)
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID")
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% group_by("run")
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% group_by(run)
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% distinct(run)
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% distinct(run) %>% count()
inner_join(tmp24, tmp27, by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% count(run)
inner_join(fsc[fsc$tick == 24], fsc[fsc$tick == 27], by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% count(run)
inner_join(filter(fsc, tick == 24), filter(fsc, tick == 27), by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% count(run)
inner_join(filter(fsc, tick == 24 & recessionMagnitude > 0), filter(fsc, tick == 27), by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% count(run)
inner_join(filter(fsc, tick == 24 & recessionMagnitude > 0), filter(fsc, tick == 27, recessionMagnitude > 0), by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% count(run)
filter(fsc, tick == 24 & recessionMagnitude > 0)
filter(fsc, recessionMagnitude > 0)
filter(fsc, tick == 24 & recessionMagnitude > 0 & recessionStart == 25)
inner_join(filter(fsc, tick == 24 & recessionMagnitude > 0 & recessionStart == 25), filter(fsc, tick == 27, recessionMagnitude > 0 & recessionStart == 25), by=c("run","FirmNumID")) %>% select("run", "FirmNumID") %>% count(run)
inner_join(filter(fsc, tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(fsc, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit")
inner_join(filter(fsc, tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(fsc, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(filter(.Data, tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(.Data, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(filter(., tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(., tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(filter(.data, tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(.data, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(filter(.data, tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(.data, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(filter(., tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(,, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(filter(fsc, tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(fsc, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
filter(fsc, tick == 24 & recessionMagnitude > 0 & recessionStart == 25)
fsc %>% filter(., tick == 24 & recessionMagnitude > 0 & recessionStart == 25)
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
filter(fsc, tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(. %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
. %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join((. %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25)),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(. %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
. %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) }%>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) }%>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>%{
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) } %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
fsc %>% {
inner_join(fsc %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) } %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join(. %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25),
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) } %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
inner_join({. %>% filter(tick == 24 & recessionMagnitude > 0 & recessionStart == 25)},
fsc %>% filter(tick == 27, recessionMagnitude > 0 & recessionStart == 25),
by=c("run","FirmNumID")) } %>%
select("run", "FirmNumID", "Profit.x", "Profit.y")
source('C:/Users/javie/git/businessCycles/businessCycles/exploreData/working.R')
